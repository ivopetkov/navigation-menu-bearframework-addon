<?php

/*
 * Navigation menu addon for Bear Framework
 * https://github.com/ivopetkov/navigation-menu-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{};
ivoPetkov.bearFrameworkAddons.navigationMenu=ivoPetkov.bearFrameworkAddons.navigationMenu||function(){return{make:function(w,r,x){var d=document.getElementById(w),c=null,p=!1,t=null,g=function(){if(!p){var h=d.getBoundingClientRect(),e=d.getAttribute(r);null===e&&(e="none");var g=JSON.stringify([e,h.top,h.left,h.width,h.height]);if(t!==g){p=!0;d.style.overflow="hidden";var q=function(b,c){for(var d=c.childNodes,h=d.length,g=0;g<h;g++){var k=d[g];if(1<k.childNodes.length){var a=k.firstChild;"a"===
a.tagName.toLowerCase()&&("none"===e?("undefined"!==typeof a.nmts&&delete a.nmts,a.removeEventListener("touchstart",a.nmtsh),delete a.nmtsh):"undefined"===typeof a.nmts&&(a.nmts=0,a.nmtsh=function(){1===this.nmts?(0<this.htmlnavth.length&&(this.href=this.htmlnavth),this.nmts=2):("undefined"===typeof this.htmlnavth&&(this.htmlnavth=this.href),this.href="javascript:void(0);",this.nmts=1)},a.addEventListener("touchstart",a.nmtsh,!1)));a=k.lastChild;if("none"===e)a.style.removeProperty("left"),a.style.removeProperty("top");
else{var l=document.body.clientWidth;a.style.left="-99999px";a.style.display="inline-block";a.style.maxWidth=l+"px";k=k.getBoundingClientRect();var f=a.getBoundingClientRect(),m=0,p=0;"horizontal-down"===e?m=0<b?k.width:0:"vertical-right"===e?m=k.width:"vertical-left"===e&&(m=-f.width);var n=!1;l=f.left+f.width+99999-l+m;0<l&&(m-=l,n=!0);l=-(f.left+99999+m);0<l&&(m+=l,n=!0);n&&("horizontal-down"===e&&0<b||"vertical-right"===e||"vertical-left"===e)&&(p+=3*k.height/4);a.style.left=Math.floor(m)+"px";
a.style.top=Math.floor(("horizontal-down"===e&&0===b?k.height:0)+p)+"px";q(b+1,a);a.style.removeProperty("display")}}}};if(null!==c)for(var b=0;99999>b;b++){var f=c.lastChild;if(null===f.firstChild)break;c.parentNode.appendChild(f.firstChild)}b=!1;if("horizontal-down"===e&&(f=d.lastChild.getBoundingClientRect(),f.left+f.width>h.left+h.width)){null===c&&(b=document.createElement("div"),b.innerHTML=x,c=b.firstChild,d.appendChild(c));f=c.getBoundingClientRect();var n=d.childNodes,u=null;for(b=0;b<n.length;b++){var v=
n[b].getBoundingClientRect();if(v.left+v.width>h.left+h.width-f.width){u=n[b];break}}d.insertBefore(c,u);for(b=0;99999>b&&c.nextSibling;b++)c.lastChild.appendChild(c.nextSibling);b=!0}b||null===c||(c.parentNode.removeChild(c),c=null);q(0,d);d.style.overflow="initial";t=g;p=!1}}};g();if("undefined"!==typeof MutationObserver){var q=null;(new MutationObserver(function(){var c=d.getAttribute(r);c!==q&&(q=c,g())})).observe(d,{attributes:!0})}"undefined"!==typeof ResizeObserver&&(new ResizeObserver(g)).observe(d);
window.addEventListener("resize",g);window.addEventListener("orientationchange",g)}}}();
EOT;
